% Generate predicates with:
%
% for i in $(seq 0 $(wc -l input | cut -d' ' -f1)); do sed "${i}q;d" input | sed 's/ /,/' | sed "s/^/move($((i-1)),/" | sed 's/$/)./'; done

move(1,forward,8).
move(2,down,9).
move(3,up,1).
move(4,forward,2).
move(5,down,6).
move(6,forward,6).
move(7,down,5).
move(8,down,4).
move(9,down,2).
move(10,forward,3).
move(11,forward,8).
move(12,down,6).
move(13,up,3).
move(14,up,3).
move(15,down,5).
move(16,up,8).
move(17,forward,8).
move(18,up,6).
move(19,forward,4).
move(20,down,8).
move(21,up,2).
move(22,up,6).
move(23,forward,7).
move(24,up,6).
move(25,down,6).
move(26,down,1).
move(27,forward,8).
move(28,up,7).
move(29,forward,9).
move(30,forward,5).
move(31,forward,8).
move(32,forward,5).
move(33,down,3).
move(34,forward,5).
move(35,up,1).
move(36,forward,6).
move(37,forward,3).
move(38,forward,3).
move(39,down,2).
move(40,forward,4).
move(41,down,3).
move(42,forward,6).
move(43,forward,2).
move(44,forward,1).
move(45,down,2).
move(46,forward,1).
move(47,down,1).
move(48,up,8).
move(49,down,4).
move(50,forward,3).
move(51,up,3).
move(52,down,5).
move(53,down,2).
move(54,forward,7).
move(55,forward,1).
move(56,down,9).
move(57,up,1).
move(58,down,1).
move(59,forward,2).
move(60,forward,1).
move(61,forward,1).
move(62,forward,7).
move(63,up,5).
move(64,forward,2).
move(65,down,6).
move(66,down,7).
move(67,down,3).
move(68,down,1).
move(69,forward,4).
move(70,forward,5).
move(71,down,3).
move(72,forward,4).
move(73,down,5).
move(74,forward,3).
move(75,forward,4).
move(76,forward,2).
move(77,up,8).
move(78,down,7).
move(79,up,3).
move(80,forward,2).
move(81,down,5).
move(82,forward,9).
move(83,forward,5).
move(84,up,1).
move(85,down,5).
move(86,down,6).
move(87,forward,2).
move(88,forward,5).
move(89,down,6).
move(90,down,1).
move(91,up,8).
move(92,up,9).
move(93,down,7).
move(94,down,5).
move(95,forward,2).
move(96,forward,7).
move(97,forward,7).
move(98,up,6).
move(99,down,4).
move(100,up,6).
move(101,forward,2).
move(102,down,4).
move(103,down,3).
move(104,down,4).
move(105,forward,2).
move(106,down,2).
move(107,down,1).
move(108,down,4).
move(109,up,4).
move(110,forward,7).
move(111,forward,6).
move(112,forward,2).
move(113,forward,5).
move(114,forward,1).
move(115,forward,7).
move(116,forward,2).
move(117,down,3).
move(118,forward,7).
move(119,forward,2).
move(120,up,4).
move(121,up,5).
move(122,down,1).
move(123,down,2).
move(124,down,3).
move(125,down,7).
move(126,up,8).
move(127,forward,4).
move(128,down,5).
move(129,down,4).
move(130,forward,3).
move(131,down,6).
move(132,forward,5).
move(133,up,5).
move(134,forward,6).
move(135,down,1).
move(136,down,7).
move(137,forward,1).
move(138,forward,6).
move(139,up,9).
move(140,forward,2).
move(141,down,1).
move(142,forward,5).
move(143,forward,2).
move(144,forward,6).
move(145,forward,8).
move(146,forward,6).
move(147,down,8).
move(148,forward,3).
move(149,down,9).
move(150,up,8).
move(151,forward,9).
move(152,down,7).
move(153,down,6).
move(154,down,1).
move(155,up,5).
move(156,down,6).
move(157,forward,7).
move(158,up,9).
move(159,forward,8).
move(160,forward,3).
move(161,forward,3).
move(162,forward,2).
move(163,down,6).
move(164,up,1).
move(165,up,5).
move(166,forward,7).
move(167,down,2).
move(168,down,5).
move(169,down,1).
move(170,down,4).
move(171,forward,8).
move(172,forward,2).
move(173,forward,8).
move(174,up,5).
move(175,forward,7).
move(176,up,7).
move(177,forward,6).
move(178,forward,9).
move(179,up,1).
move(180,down,4).
move(181,forward,8).
move(182,forward,4).
move(183,down,9).
move(184,up,6).
move(185,down,8).
move(186,up,9).
move(187,down,2).
move(188,down,2).
move(189,down,9).
move(190,up,3).
move(191,down,7).
move(192,down,2).
move(193,up,9).
move(194,forward,9).
move(195,down,5).
move(196,forward,2).
move(197,forward,1).
move(198,forward,2).
move(199,down,4).
move(200,forward,4).
move(201,down,2).
move(202,forward,8).
move(203,up,3).
move(204,forward,6).
move(205,up,7).
move(206,up,9).
move(207,forward,4).
move(208,up,9).
move(209,down,5).
move(210,forward,5).
move(211,up,6).
move(212,down,2).
move(213,down,4).
move(214,forward,1).
move(215,down,2).
move(216,forward,3).
move(217,down,7).
move(218,down,1).
move(219,down,5).
move(220,forward,5).
move(221,up,5).
move(222,forward,3).
move(223,down,5).
move(224,forward,7).
move(225,down,3).
move(226,down,2).
move(227,up,9).
move(228,down,4).
move(229,forward,4).
move(230,down,4).
move(231,forward,1).
move(232,up,9).
move(233,down,8).
move(234,forward,2).
move(235,down,7).
move(236,forward,8).
move(237,down,5).
move(238,up,2).
move(239,down,9).
move(240,down,2).
move(241,up,4).
move(242,up,2).
move(243,forward,8).
move(244,forward,3).
move(245,forward,4).
move(246,down,1).
move(247,down,3).
move(248,forward,3).
move(249,down,8).
move(250,forward,7).
move(251,down,7).
move(252,forward,5).
move(253,forward,5).
move(254,up,3).
move(255,down,6).
move(256,forward,1).
move(257,down,4).
move(258,forward,2).
move(259,down,4).
move(260,up,2).
move(261,down,3).
move(262,forward,4).
move(263,forward,6).
move(264,up,7).
move(265,down,3).
move(266,forward,7).
move(267,forward,1).
move(268,down,1).
move(269,up,3).
move(270,down,7).
move(271,up,3).
move(272,up,8).
move(273,up,7).
move(274,up,7).
move(275,forward,7).
move(276,down,2).
move(277,forward,6).
move(278,forward,7).
move(279,up,3).
move(280,down,3).
move(281,up,9).
move(282,down,6).
move(283,down,7).
move(284,down,7).
move(285,up,5).
move(286,forward,6).
move(287,forward,2).
move(288,up,9).
move(289,forward,2).
move(290,down,3).
move(291,down,3).
move(292,forward,5).
move(293,forward,3).
move(294,forward,6).
move(295,forward,6).
move(296,down,7).
move(297,forward,2).
move(298,down,3).
move(299,up,4).
move(300,forward,1).
move(301,forward,5).
move(302,down,5).
move(303,up,1).
move(304,down,9).
move(305,forward,3).
move(306,up,6).
move(307,forward,5).
move(308,down,4).
move(309,forward,9).
move(310,up,5).
move(311,forward,7).
move(312,up,7).
move(313,forward,9).
move(314,forward,2).
move(315,forward,6).
move(316,forward,3).
move(317,forward,3).
move(318,up,7).
move(319,down,1).
move(320,down,1).
move(321,forward,1).
move(322,down,8).
move(323,down,2).
move(324,forward,4).
move(325,up,7).
move(326,forward,7).
move(327,down,5).
move(328,down,7).
move(329,up,6).
move(330,down,4).
move(331,forward,4).
move(332,forward,4).
move(333,up,7).
move(334,down,9).
move(335,forward,6).
move(336,forward,1).
move(337,down,7).
move(338,forward,5).
move(339,forward,2).
move(340,forward,1).
move(341,up,7).
move(342,down,9).
move(343,forward,2).
move(344,down,7).
move(345,up,8).
move(346,forward,1).
move(347,forward,4).
move(348,up,4).
move(349,forward,1).
move(350,down,9).
move(351,down,5).
move(352,down,8).
move(353,forward,8).
move(354,forward,8).
move(355,down,8).
move(356,down,3).
move(357,down,5).
move(358,down,6).
move(359,up,9).
move(360,forward,1).
move(361,down,1).
move(362,forward,1).
move(363,forward,1).
move(364,down,6).
move(365,forward,3).
move(366,down,1).
move(367,forward,9).
move(368,forward,3).
move(369,up,7).
move(370,down,9).
move(371,forward,5).
move(372,down,4).
move(373,up,9).
move(374,down,2).
move(375,down,5).
move(376,down,6).
move(377,forward,1).
move(378,up,2).
move(379,forward,9).
move(380,up,7).
move(381,forward,2).
move(382,forward,8).
move(383,down,5).
move(384,down,6).
move(385,down,8).
move(386,forward,4).
move(387,down,4).
move(388,forward,9).
move(389,forward,3).
move(390,forward,6).
move(391,forward,9).
move(392,up,2).
move(393,down,8).
move(394,up,2).
move(395,up,6).
move(396,up,5).
move(397,down,5).
move(398,down,7).
move(399,forward,1).
move(400,up,6).
move(401,forward,9).
move(402,up,4).
move(403,forward,4).
move(404,up,2).
move(405,forward,3).
move(406,down,8).
move(407,down,1).
move(408,up,5).
move(409,forward,5).
move(410,down,3).
move(411,down,4).
move(412,down,1).
move(413,forward,3).
move(414,up,2).
move(415,forward,3).
move(416,down,1).
move(417,forward,8).
move(418,up,3).
move(419,forward,4).
move(420,down,3).
move(421,forward,6).
move(422,down,9).
move(423,down,7).
move(424,forward,3).
move(425,forward,5).
move(426,forward,1).
move(427,forward,3).
move(428,up,8).
move(429,forward,2).
move(430,forward,2).
move(431,forward,7).
move(432,up,9).
move(433,forward,4).
move(434,down,1).
move(435,down,6).
move(436,forward,8).
move(437,forward,5).
move(438,up,4).
move(439,up,5).
move(440,up,9).
move(441,forward,9).
move(442,up,8).
move(443,down,3).
move(444,up,5).
move(445,forward,1).
move(446,forward,5).
move(447,up,9).
move(448,forward,8).
move(449,forward,4).
move(450,forward,3).
move(451,forward,1).
move(452,forward,6).
move(453,down,2).
move(454,up,8).
move(455,down,7).
move(456,down,1).
move(457,down,5).
move(458,up,1).
move(459,forward,9).
move(460,down,2).
move(461,down,4).
move(462,forward,3).
move(463,forward,1).
move(464,down,7).
move(465,up,9).
move(466,up,7).
move(467,down,2).
move(468,down,4).
move(469,down,1).
move(470,forward,9).
move(471,up,4).
move(472,down,9).
move(473,down,9).
move(474,down,4).
move(475,down,9).
move(476,forward,1).
move(477,down,2).
move(478,forward,8).
move(479,up,4).
move(480,up,3).
move(481,forward,4).
move(482,down,5).
move(483,forward,8).
move(484,forward,2).
move(485,forward,4).
move(486,up,3).
move(487,up,2).
move(488,up,3).
move(489,forward,4).
move(490,forward,4).
move(491,forward,6).
move(492,down,7).
move(493,down,8).
move(494,up,3).
move(495,down,9).
move(496,down,5).
move(497,up,7).
move(498,up,1).
move(499,down,3).
move(500,down,4).
move(501,up,5).
move(502,up,9).
move(503,down,2).
move(504,up,8).
move(505,forward,9).
move(506,down,3).
move(507,forward,4).
move(508,down,5).
move(509,down,1).
move(510,forward,9).
move(511,forward,2).
move(512,up,3).
move(513,down,9).
move(514,down,8).
move(515,up,7).
move(516,forward,2).
move(517,down,9).
move(518,up,8).
move(519,up,2).
move(520,down,3).
move(521,forward,3).
move(522,forward,3).
move(523,forward,3).
move(524,forward,4).
move(525,down,7).
move(526,up,2).
move(527,forward,3).
move(528,forward,7).
move(529,forward,5).
move(530,forward,7).
move(531,down,6).
move(532,down,9).
move(533,down,6).
move(534,down,8).
move(535,up,4).
move(536,down,4).
move(537,down,2).
move(538,up,1).
move(539,down,3).
move(540,forward,7).
move(541,forward,5).
move(542,down,7).
move(543,forward,1).
move(544,up,7).
move(545,forward,9).
move(546,down,8).
move(547,down,1).
move(548,down,3).
move(549,down,1).
move(550,up,8).
move(551,forward,7).
move(552,up,5).
move(553,forward,6).
move(554,down,1).
move(555,down,8).
move(556,up,1).
move(557,up,9).
move(558,forward,7).
move(559,down,9).
move(560,forward,3).
move(561,forward,8).
move(562,forward,7).
move(563,down,3).
move(564,down,5).
move(565,up,3).
move(566,up,7).
move(567,up,3).
move(568,up,6).
move(569,up,8).
move(570,down,3).
move(571,forward,7).
move(572,down,7).
move(573,forward,9).
move(574,up,9).
move(575,down,1).
move(576,down,3).
move(577,down,8).
move(578,down,6).
move(579,forward,1).
move(580,up,6).
move(581,down,1).
move(582,up,4).
move(583,down,2).
move(584,forward,9).
move(585,up,8).
move(586,up,2).
move(587,down,6).
move(588,down,1).
move(589,forward,2).
move(590,forward,6).
move(591,forward,1).
move(592,forward,2).
move(593,up,6).
move(594,down,7).
move(595,down,8).
move(596,forward,9).
move(597,up,2).
move(598,down,6).
move(599,down,8).
move(600,down,5).
move(601,up,6).
move(602,forward,6).
move(603,down,5).
move(604,forward,4).
move(605,forward,2).
move(606,down,1).
move(607,down,4).
move(608,up,5).
move(609,down,5).
move(610,down,1).
move(611,down,9).
move(612,down,1).
move(613,down,1).
move(614,forward,1).
move(615,forward,5).
move(616,up,4).
move(617,down,5).
move(618,down,3).
move(619,down,2).
move(620,down,7).
move(621,forward,5).
move(622,forward,6).
move(623,forward,2).
move(624,up,9).
move(625,up,3).
move(626,forward,6).
move(627,down,4).
move(628,forward,8).
move(629,forward,4).
move(630,forward,9).
move(631,down,6).
move(632,down,9).
move(633,down,1).
move(634,forward,6).
move(635,down,8).
move(636,down,7).
move(637,forward,5).
move(638,down,4).
move(639,forward,5).
move(640,forward,5).
move(641,up,3).
move(642,down,1).
move(643,down,4).
move(644,forward,1).
move(645,forward,7).
move(646,down,5).
move(647,down,4).
move(648,forward,7).
move(649,forward,3).
move(650,forward,4).
move(651,down,4).
move(652,forward,8).
move(653,up,2).
move(654,up,6).
move(655,down,9).
move(656,up,1).
move(657,down,8).
move(658,up,2).
move(659,up,6).
move(660,forward,5).
move(661,forward,7).
move(662,up,4).
move(663,down,4).
move(664,down,8).
move(665,forward,5).
move(666,up,4).
move(667,down,6).
move(668,forward,9).
move(669,up,4).
move(670,forward,7).
move(671,up,7).
move(672,down,3).
move(673,down,2).
move(674,down,2).
move(675,down,6).
move(676,down,4).
move(677,forward,4).
move(678,down,3).
move(679,down,4).
move(680,down,4).
move(681,down,8).
move(682,up,2).
move(683,down,3).
move(684,forward,5).
move(685,forward,5).
move(686,up,5).
move(687,forward,1).
move(688,down,7).
move(689,forward,5).
move(690,forward,7).
move(691,forward,9).
move(692,forward,4).
move(693,down,1).
move(694,down,1).
move(695,up,5).
move(696,down,6).
move(697,down,8).
move(698,down,9).
move(699,down,9).
move(700,forward,7).
move(701,down,6).
move(702,forward,3).
move(703,down,7).
move(704,up,3).
move(705,forward,5).
move(706,forward,5).
move(707,up,6).
move(708,down,5).
move(709,down,8).
move(710,down,5).
move(711,down,1).
move(712,down,7).
move(713,forward,8).
move(714,up,9).
move(715,forward,2).
move(716,up,1).
move(717,down,9).
move(718,down,2).
move(719,forward,7).
move(720,up,1).
move(721,down,5).
move(722,forward,3).
move(723,up,6).
move(724,forward,9).
move(725,up,9).
move(726,down,3).
move(727,forward,2).
move(728,up,6).
move(729,down,6).
move(730,up,8).
move(731,down,3).
move(732,up,5).
move(733,forward,9).
move(734,up,3).
move(735,forward,4).
move(736,forward,6).
move(737,down,3).
move(738,forward,4).
move(739,down,5).
move(740,down,7).
move(741,down,7).
move(742,forward,9).
move(743,forward,6).
move(744,down,9).
move(745,up,1).
move(746,forward,2).
move(747,down,8).
move(748,down,7).
move(749,up,7).
move(750,forward,6).
move(751,up,5).
move(752,down,6).
move(753,forward,6).
move(754,down,3).
move(755,forward,2).
move(756,down,7).
move(757,forward,2).
move(758,down,3).
move(759,down,8).
move(760,forward,4).
move(761,up,8).
move(762,forward,7).
move(763,down,4).
move(764,forward,3).
move(765,down,3).
move(766,forward,6).
move(767,down,7).
move(768,down,7).
move(769,forward,8).
move(770,forward,9).
move(771,down,8).
move(772,down,4).
move(773,forward,5).
move(774,down,1).
move(775,forward,9).
move(776,down,7).
move(777,up,3).
move(778,down,6).
move(779,down,4).
move(780,down,9).
move(781,forward,3).
move(782,down,1).
move(783,forward,1).
move(784,down,5).
move(785,forward,1).
move(786,forward,9).
move(787,down,9).
move(788,forward,5).
move(789,down,1).
move(790,up,9).
move(791,down,3).
move(792,down,2).
move(793,up,6).
move(794,forward,4).
move(795,down,6).
move(796,down,2).
move(797,forward,5).
move(798,up,8).
move(799,down,7).
move(800,up,6).
move(801,down,1).
move(802,forward,3).
move(803,forward,4).
move(804,down,9).
move(805,down,2).
move(806,forward,5).
move(807,forward,8).
move(808,up,2).
move(809,forward,9).
move(810,up,5).
move(811,down,1).
move(812,forward,1).
move(813,forward,6).
move(814,forward,9).
move(815,forward,2).
move(816,down,8).
move(817,forward,1).
move(818,up,8).
move(819,forward,1).
move(820,forward,8).
move(821,up,5).
move(822,forward,3).
move(823,down,4).
move(824,up,8).
move(825,down,6).
move(826,up,1).
move(827,forward,2).
move(828,forward,4).
move(829,up,6).
move(830,forward,1).
move(831,forward,4).
move(832,up,6).
move(833,down,8).
move(834,up,7).
move(835,forward,5).
move(836,up,7).
move(837,down,9).
move(838,down,2).
move(839,up,5).
move(840,forward,2).
move(841,down,7).
move(842,forward,1).
move(843,forward,1).
move(844,forward,3).
move(845,down,6).
move(846,forward,7).
move(847,up,2).
move(848,up,1).
move(849,forward,1).
move(850,up,5).
move(851,down,1).
move(852,forward,7).
move(853,up,9).
move(854,forward,7).
move(855,down,6).
move(856,up,4).
move(857,down,5).
move(858,up,2).
move(859,down,4).
move(860,up,3).
move(861,down,6).
move(862,down,7).
move(863,down,7).
move(864,up,1).
move(865,forward,4).
move(866,forward,1).
move(867,up,2).
move(868,down,7).
move(869,down,5).
move(870,forward,7).
move(871,forward,5).
move(872,forward,2).
move(873,down,4).
move(874,down,6).
move(875,down,8).
move(876,forward,9).
move(877,forward,8).
move(878,up,9).
move(879,forward,6).
move(880,down,6).
move(881,down,6).
move(882,down,8).
move(883,up,5).
move(884,forward,6).
move(885,down,6).
move(886,forward,5).
move(887,down,4).
move(888,down,6).
move(889,down,2).
move(890,up,3).
move(891,forward,1).
move(892,forward,8).
move(893,down,2).
move(894,forward,9).
move(895,forward,7).
move(896,forward,8).
move(897,forward,1).
move(898,down,8).
move(899,forward,1).
move(900,down,1).
move(901,forward,6).
move(902,forward,4).
move(903,forward,5).
move(904,up,9).
move(905,up,1).
move(906,down,7).
move(907,up,8).
move(908,down,5).
move(909,down,2).
move(910,forward,9).
move(911,up,2).
move(912,forward,6).
move(913,down,7).
move(914,down,7).
move(915,down,2).
move(916,down,6).
move(917,down,7).
move(918,forward,9).
move(919,up,2).
move(920,down,6).
move(921,forward,8).
move(922,forward,1).
move(923,down,3).
move(924,down,2).
move(925,forward,3).
move(926,forward,7).
move(927,down,3).
move(928,down,1).
move(929,down,4).
move(930,down,9).
move(931,forward,1).
move(932,down,6).
move(933,down,8).
move(934,down,4).
move(935,down,5).
move(936,down,5).
move(937,up,9).
move(938,forward,7).
move(939,down,9).
move(940,up,3).
move(941,up,5).
move(942,up,1).
move(943,forward,2).
move(944,forward,9).
move(945,down,3).
move(946,forward,1).
move(947,up,3).
move(948,forward,6).
move(949,up,2).
move(950,forward,7).
move(951,forward,5).
move(952,forward,8).
move(953,forward,7).
move(954,forward,8).
move(955,down,5).
move(956,up,3).
move(957,forward,5).
move(958,forward,8).
move(959,forward,1).
move(960,forward,5).
move(961,forward,7).
move(962,forward,2).
move(963,down,6).
move(964,down,6).
move(965,down,6).
move(966,down,2).
move(967,down,2).
move(968,up,1).
move(969,down,1).
move(970,forward,5).
move(971,forward,7).
move(972,down,4).
move(973,forward,4).
move(974,up,1).
move(975,forward,7).
move(976,forward,8).
move(977,down,5).
move(978,down,2).
move(979,down,2).
move(980,down,5).
move(981,forward,3).
move(982,forward,7).
move(983,down,5).
move(984,forward,2).
move(985,forward,8).
move(986,down,3).
move(987,forward,6).
move(988,up,1).
move(989,forward,7).
move(990,forward,4).
move(991,forward,1).
move(992,forward,9).
move(993,forward,2).
move(994,down,1).
move(995,down,1).
move(996,down,8).
move(997,forward,4).
move(998,down,6).
move(999,forward,7).
move(1000,forward,2).

depth_delta(X, -N) :- move(X, up, N).
depth_delta(X, N) :- move(X, down, N).
depth_delta(X, 0) :- move(X, forward, _).


pos_delta(X, N) :- move(X, forward, N).
pos_delta(X, 0) :- move(X, up, _).
pos_delta(X, 0) :- move(X, down, _).

depth(0, 0).
depth(X, D) :- depth_delta(X, N), P is X - 1, depth(P, M), D is N + M.

pos(0, 0).
pos(X, D) :- pos_delta(X, N), P is X - 1, pos(P, M), D is N + M.

res(X, R) :- pos(X, D), depth(X, P), R is D * P.

% Get the solution with: res(1000, R).
